<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Protocol Overview | LivePerson Technical Documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

    <script src="assets/js/jsoneditor.js"></script>
    <!-- // <script src="js/jquery-3.1.0.min.js"></script> -->
    <!-- <link rel='stylesheet' id='theme_stylesheet' href='//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css'> -->
<!--     <link rel='stylesheet' id='theme_stylesheet' href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css'>
 -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://liveperson.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> LivePerson Technical Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li><a class="email" title="Submit feedback" href="https://github.com/LivePersonInc/dev-hub/issues" ><i class="fa fa-github"></i> Issues</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Protocol Overview">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          














<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
        
            
            <li>
                <a href="#">Common Guidelines</a>
                <ul>

                            
                                
                                    <li class="subfolders">
                                        <a href="#">Introduction</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="index.html">Home</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Services Domains</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="common_csds.html">Home</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Authentication</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="common-authentication.html">API Reference</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="not_yet.html">OAuth 2.0</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                            







                    
                </ul>
                
            
            
            <li>
                <a href="#">Agent</a>
                <ul>

                            
                                
                                    <li class="subfolders">
                                        <a href="#">Agent Workspace Widget SDK</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-overview.html">Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-getting-started.html">Getting Started</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-limitations.html">Limitations</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-how-to-use.html">How to use the SDK</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-methods.html">Methods</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-public-model.html">Public Model Structure</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-public-properties.html">Public Properties</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-workspace-sdk-code-examples.html">Code Examples</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">LivePerson Domain API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-domain-overview.html">Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-domain-domain-api.html">Domain API</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Login Service API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-overview.html">Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-configuration.html">Configuration</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-methods.html">Methods</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-login.html">Login</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-refresh.html">Refresh</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-logout.html">Logout</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-login-non-authenticated-flow.html">Non Authenticated Flow</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Chat Agent API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-overview.html">Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-methods.html">Methods</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-resources.html">Retrieve all Resources for Agent Session</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-current-availability.html">Retrieve Current Availability</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-set-agent-availability.html">Set Agent Availability</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-retrieve-available-agents.html">Retrieve Available Agents</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-available-slots.html">Retrieve Available Slots</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-agent-information.html">Retrieve Agent Information</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-determine-incoming.html">Determine Incoming Chat Requests</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-accept-chat.html">Accept a Chat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-chat-sessions.html">Retrieve Chat Sessions</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-chat-resources.html">Retrieve Chat Resources, Events and Information</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-data.html">Retrieve Data for Multiple Chats</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-chat-events.html">Retrieve Chat Events</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-add-lines.html">Add Lines</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-end-chat.html">End Chat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-chat-information.html">Retrieve Chat Information</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-visitor-name.html">Retrieve Visitor’s Name</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-agent-typing-status.html">Retrieve Agent’s Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-set-agent-typing-status.html">Set Agent’s Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-visitor-typing-status.html">Retrieve Visitor’s Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-available-skills.html">Retrieve Available Skills</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-transfer-chat.html">Transfer a Chat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-retrieve-survey-structure.html">Retrieve the Agent Survey Structure</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-submit-survey-data.html">Submit Survey Data</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="agent-chat-agent-samples.html">Samples</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            







                    
                </ul>
                
            
            
            <li>
                <a href="#">Consumer Experience</a>
                <ul>

                            
                                
                                    <li class="subfolders">
                                        <a href="#">JavaScript Chat API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getting-started.html">Getting Started</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-chat-states.html">Chat States</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-surveys.html">Surveys</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-creating-an-instance.html">Creating an Instance</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-methods.html">Methods</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getestimatedwaittime.html">getEstimatedWaitTime</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getprechatsurvey.html">getPreChatSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-startchatrequestchat.html">startChat/requestChat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-addline.html">addLine</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-setvisitortyping.html">setVisitorTyping</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-setvisitorname.html">setVisitorName</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-endChat.html">endChat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-setcustomvariable.html">setCustomVariable</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-requesttranscript.html">requestTranscript</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getexitsurvey.html">getExitSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-submitexitsurvey.html">submitExitSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getofflinesurvey.html">getOfflineSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-submitofflinesurvey.html">submitOfflineSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getstate.html">getState</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getagentloginname.html">getAgentLoginName</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getvisitorname.html">getVisitorName</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getagentid.html">getAgentId</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getrtsessionid.html">getRtSessionId</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getsessionkey.html">getSessionKey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-getagenttyping.html">getAgentTyping</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-events.html">Events</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onload.html">onLoad</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-oninit.html">onInit</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onestimatedwaittime.html">onEstimatedWaitTime</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onprechatsurvey.html">onPreChatSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onstart.html">onStart</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onstop.html">onStop</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onrequestchat.html">onRequestChat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-ontranscript.html">onTranscript</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-online.html">onLine</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onstate.html">onState</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-oninfo.html">onInfo</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onagenttyping.html">onAgentTyping</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onexitsurvey.html">onExitSurvey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-javascript-chat-onaccounttoaccounttransfer.html">onAccountToAccountTransfer</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Server Chat API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-getting-started.html">Getting Started</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-base-resource.html">Base Resource</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-methods.html">Methods</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-availability.html">Retrieve Availability</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-available-slots.html">Retrieve Available Slots</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-estimated-wait-time.html">Retrieve Estimated Wait Time</a></li>
                                                    
                                                
                                            
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-offline-survey.html">Retrieve an Offline Survey</a></li>
                                                    
                                                
                                            
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-start-chat.html">Start a Chat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-chat-resources.html">Retrieve Chat Resources, Events and Information</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-chat-events.html">Retrieve Chat Events</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-add-lines.html">Add Lines / End Chat</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-chat-information.html">Retrieve Chat Information</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-visitor-name.html">Retrieve the Visitor's Name</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-set-visitor-name.html">Set the Visitor's Name</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-agent-typing-status.html">Retrieve the Agent's Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-visitor-typing-status.html">Retrieve the Visitor's Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-set-visitor-typing-status.html">Set the Visitor's Typing Status</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-retrieve-exit-survey-structure.html">Retrieve Exit Survey Structure</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-submit-survey-data.html">Submit Survey Data</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-set-custom-variables.html">Set Custom Variables</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-experience-server-chat-send-transcript.html">Send a Transcript</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            







                    
                </ul>
                
            
            
            <li>
                <a href="#">Real-time Interactions</a>
                <ul>

                            
                                
                                    <li class="subfolders">
                                        <a href="#">Visit Information API</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="rt-interactions-visit-information-overview.html">Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="rt-interactions-visit-information-visit-information.html">Visit Information</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            







                    
                </ul>
                
            
            
            <li>
                <a href="#">Consumer Interaction</a>
                <ul>

                            
                                
                                    <li class="subfolders">
                                        <a href="#">Introduction</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-interation-index.html">Home</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="active thirdlevel"><a href="consumer-int-protocol-overview.html">Protocol Overview</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-getting-started.html">Getting Started</a></li>
                                                    
                                                
                                            
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Tutorials</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-get-msg.html">Get Messages</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-conversation-md.html">Conversation Metadata</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-readaccept-events.html">Read/Accept events</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-authentication.html">Authentication</a></li>
                                                    
                                                
                                            
                                                
                                            
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-agent-profile.html">Agent Profile</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-post-survey.html">Post Conversation Survey</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-client-props.html">Client Properties</a></li>
                                                    
                                                
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-no-headers.html">Avoid ga, qasocket Headers</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            
                                
                                    <li class="subfolders">
                                        <a href="#">Samples</a>
                                        <ul>
                                            
                                                
                                                    
                                                        <li class="thirdlevel"><a href="consumer-int-js-sample.html">Javascript Messenger</a></li>
                                                    
                                                
                                            
                                        </ul>
                                    </li>
                                
                            







                    
                        
                            
                                <li><a href="consumer-int-api-reference.html">API Reference</a></li>
                            
                        
                    
                </ul>
                
            
            
            
            
            
            
            
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Protocol Overview</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    

  <h2 id="api-endpoints">API Endpoints</h2>
<p>The API consists of two types of calls:</p>

<ul>
  <li>Peripheral APIs - Domains Discovery, Token creation, Agent Profile, etc. In most cases these calls are done using REST.</li>
  <li>Messaging API - In this API, the WebSocket connection should be established.</li>
</ul>

<h2 id="messaging-api-websocket-connection">Messaging API WebSocket Connection</h2>

<h3 id="establishment">Establishment</h3>
<p>Refer to the <a href="consumer-int-getting-started.html">Getting Started</a> section to see an example of how to establish this connection.</p>

<h3 id="keep-alive">Keep Alive</h3>
<p>The server will close any idle connection. In order to keep the connection open, the client should send a message every 60 seconds. For this purpose, the client can use one of the following:</p>

<ul>
  <li>Websocket Ping/Pong Mechanism</li>
  <li>For clients that cannot send Ping messages (such as browsers): Utilize the applicative <code class="highlighter-rouge">.GetClock</code> request: <code class="highlighter-rouge"><span class="p">{</span><span class="nt">"kind"</span><span class="p">:</span><span class="s2">"req"</span><span class="p">,</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="s2">".GetClock"</span><span class="p">}</span></code>.</li>
</ul>

<h3 id="error-handling">Error Handling</h3>
<p>Upon disconnection, the client will receive a standard status code as defined by <a href="https://tools.ietf.org/html/rfc6455#section-7.4">rfc6455</a>. Two custom status codes are used by the API:</p>

<ul>
  <li><strong>4401</strong> - A fresh token is required from the customer. When an authenticated connection is used, this code states that the request does not contain the required autorization token, or contains an expired token. This response asks the client to supply a new token from the customer.</li>
  <li><strong>4407</strong> - For unauthenticated identities, this status code states that the client should ask the LivePerson IDP service to extend the validity of the current identity.</li>
</ul>

<p>For any other status code, the client should wait a short period of time and then try to reconnect.</p>

<h2 id="message-format">Message Format</h2>
<p>Every message sent by the client or by the server should be serialized to JSON format.</p>

<h3 id="requests-responses-and-notifications">Requests, Responses and Notifications</h3>

<p>Each API message can be one of the following kinds:</p>

<ul>
  <li><strong>Request</strong> - A message sent from the client. The server will reply with a response message.</li>
  <li><strong>Response</strong> - A message sent by the server in response to a client request message.</li>
  <li><strong>Notification</strong> - A message sent from the server to the client, triggered by a server decision. The trigger can be based on a prior <code class="highlighter-rouge">Subscription</code> request made by the client, or on an implicit subscription made by the server.</li>
</ul>

<p>The kind of message is denoted by the <code class="highlighter-rouge">kind</code> property in the top level of the JSON object, and can be any of the following: <code class="highlighter-rouge">req</code>, <code class="highlighter-rouge">resp</code>, <code class="highlighter-rouge">notification</code>. Below is an example of a request message:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"kind"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cm.AgentRequestConversation"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hsjshka8162s"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"body"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"ttrDefName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="message-types">Message Types</h3>

<p>Every message has a type. The structure of the body of the message can be changed for different types. The type of message is denoted by the <code class="highlighter-rouge">type</code> property in the top level of the JSON object. Below is an example of a message with the type of<code class="highlighter-rouge">cm.MyRequest</code>:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="nt">"kind"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cm.MyRequest"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hsjshka8162s"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"body"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"ttrDefName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="responses">Responses</h3>
<p>Responses should be sent with some kind of correlation to the request that they are answering. For this purpose, every request message must state the <code class="highlighter-rouge">id</code> string for the request. The server will reply with the same <code class="highlighter-rouge">id</code> in the response message as the value of the <code class="highlighter-rouge">reqId</code> field in the top level JSON object of the response message. Below is an example of a response message to the request from the above section:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="nt">"kind"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"resp"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"reqId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hsjshka8162s"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cm.MyRequestResponse"</span><span class="p">,</span><span class="w">
	</span><span class="nt">"code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
	</span><span class="nt">"body"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"conversationId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"hdjsdhksh2"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The response message will also contain a <code class="highlighter-rouge">code</code> field. This field will be populated with the status code of the request. The values of this field will be taken from the <a href="https://tools.ietf.org/html/rfc7231">HTTP Semantics</a>.</p>

<h3 id="subscriptions">Subscriptions</h3>

<p>In this pattern the client has to send some kind of request message to the server. In response, it will receive a response message with a success indication and a subscription ID. Following this, the server will start sending notifications with the subscription ID. 
## API Client Requirements</p>

<h3 id="client-future-compatibility">Client Future Compatibility</h3>

<p>In order for the client to be compatible with future API changes, it should:</p>

<ul>
  <li>Ignore any field that is not documented in the <a href="consumer-int-api-reference.html">API reference</a>. This includes existing fields that are not documented (for deprecation reasons), as well as new fields that will be added to the messages in newer versions.</li>
  <li>Ignore any enum fields that contain undocumented values.</li>
</ul>

<h3 id="single-element-arrays">Single Element Arrays</h3>

<p>An array containing a single element may be sent using the element itself instead of the array.</p>

<h2 id="typical-frontend-api-session">Typical Frontend API Session</h2>

<p>In this section we will provide an example API session.</p>

<h3 id="initiation">Initiation</h3>

<p>The consumer initiates the messaging application on their device. At this point, the client should do the following:</p>

<ol>
  <li>Use the Authentication API to pass the external token and get an API token (JWT).</li>
  <li>Open a WebSocket connection to the Interaction API.</li>
  <li>Subscribe itself to the conversations metadata (in order to get the conversations list). This list may contain previously closed conversations along with existing active conversations. The list may be presented to the consumer.</li>
</ol>

<p>The user may now want to <a href="#continue-an-existing-conversation">continue an existing conversation</a> or <a href="#start-a-new-conversation">start a new conversation</a>.</p>

<h3 id="continue-an-existing-conversation">Continue an existing conversation</h3>

<p>In the initation process, the client got the conversation list, including the existing conversation (with <code class="highlighter-rouge">OPEN</code> state). To enable the consumer to continue this conversation, the client should do the following:</p>

<ol>
  <li>Subscribe to the conversation messaging events. If the client already has some of the messages of this conversation in its memory, it may want to subscribe only to the last messages sequence. This is to avoid sending over the network all the messages it already has.</li>
  <li>Receive notifications about the events of this conversation from the server.
    <ol>
      <li>Text messages should be added to the presentation, ordered by their sequence.</li>
      <li>Read/Accept events should add a graphical indication next to the text message they are referring to.</li>
    </ol>
  </li>
  <li>Keep receiving notifications from the server about new events currently being published by the other side.</li>
  <li>Publish an <code class="highlighter-rouge">accept</code> event when a new text message is received to let other agents know that the message has been successfully delivered to the consumer device. When the message is presented to the consumer, the client should publish a <code class="highlighter-rouge">read</code> receipt.</li>
  <li>Publish text messages when the consumer wants to send their own text.</li>
  <li>Publish a <code class="highlighter-rouge">chat state</code> event when the consumer is typing, watching, or stops watching the conversation.</li>
</ol>

<h3 id="start-a-new-conversation">Start a new conversation</h3>

<p>In order to create a new conversation, the client should do the following:</p>

<ol>
  <li>Send a request to create a new conversation.</li>
  <li>Get a notification about the new conversation.</li>
</ol>

<p>The client should continue as described above for an <a href="#continue-an-existing-conversation">existing conversation</a>.</p>

<h3 id="finish-a-conversation">Finish a conversation</h3>

<p>The conversation can be closed either by the agent or by the consumer.</p>

<p>If the consumer wants to close the conversation by themselves, the client must send a request to update the conversation metadata and set the <code class="highlighter-rouge">state</code> to <code class="highlighter-rouge">close</code>. This can also be done by the agent.</p>

<p>The client will get a notification about this conversation with a <code class="highlighter-rouge">state</code> property set to <code class="highlighter-rouge">close</code>.</p>

<p>The client can present a CSAT survey to the consumer and send an <code class="highlighter-rouge">update conversation metadata</code> request with the CSAT information.</p>

<h3 id="handle-disconnection">Handle disconnection</h3>

<p>When the API token expires, the WebSocket connection will be closed with <code class="highlighter-rouge">4401/4407</code> closereason. The client should return to the <a href="#initiation">initation</a> step, issue a fresh token, and reestablish the connection.</p>

<p>For any other <code class="highlighter-rouge">closeReason</code>, the client should wait a few seconds and then try reconnecting.</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 LivePerson. All rights reserved.<br />This documentation is subject to change without notice.<br />
 Site last generated: Jan 30, 2017 <br />
<p><img src="img/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>